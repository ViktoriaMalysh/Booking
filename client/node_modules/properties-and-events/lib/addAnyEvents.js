"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _d3Dispatch = require("d3-dispatch");

// adds events to the supplied object
const DISPATCHERS = Symbol('dispatchers');

function _default(object) {
  if (!object[DISPATCHERS]) {
    object[DISPATCHERS] = {};
  }

  const dispatchersByEventName = object[DISPATCHERS];

  function eventName(type) {
    return type.split('.').shift();
  }

  object.on = function (type, handler) {
    const name = eventName(type);

    if (!dispatchersByEventName[name]) {
      dispatchersByEventName[name] = (0, _d3Dispatch.dispatch)(name);
    }

    dispatchersByEventName[name].on(type, handler);
    return object;
  };

  object.fire = function (type, ...args) {
    const dispatcher = dispatchersByEventName[eventName(type)];

    if (dispatcher) {
      dispatcher.call(type, object, ...args);
    }
  };
}